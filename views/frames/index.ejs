<%- layout('layouts/boilerplate') %>
<h1 class="text-center mb-3">CREATE FRAMES</h1>
<div class="row">
  <div class="col-8 offset-2">
    <%- include('../partials/howToUseAdd') %>
  </div>

<div>
    <!-- <a class="btn btn-info mb-3" href="/frames/new">Add A New Frame</a> -->
    <!-- <button class="btn btn-info mb-3" id="nextFrameBtn" onclick="makeNewAccordionWForm()">Add Next Frame</button> -->
    <%- include('../partials/frameForm') %>
</div>
<div class="row">
  <% for (let i = count - 1; i > -1; i--) { %>
    <div class="col-sm-3 mb-4 mb-sm-0">
      <div class="card mb-4 rounded-4 shadow-sm rounded" id="card<%= frames[i]._id%>" style="background-color: <%= frames[i].color%>;">
        <div class="card-body">
          <h3 class="card-title"><%= frames[i].title %></h3>
          <h6  class="card-subtitle mb-2 text-body-secondary"><%= frames[i].description %></h6>
        </div>
        <ul class="list-group list-group-flush">
          <% for (let word of frames[i].words) { %>
            <li class="list-group-item"><%= word %></li>
          <% } %>
        </ul>
        <div class="card-body">
          <a id="edit-btn" class="card-link btn rounded-pill border shadow-sm border-secondary" href="/frames/<%= frames[i]._id %>/edit/#cardToEdit">edit</a>
          <!-- Button triggers modal -->
          <button id="delete-btn" type="button" class="btn rounded-pill shadow-sm border-secondary float-end" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
            delete
          </button>

          <!-- Modal -->
          <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-header">
                  <h1 class="modal-title fs-5" id="staticBackdropLabel">Are you sure you want to delete this frame?</h1>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <br>
                  This would also delete the description and all words associated with it.
                </div>
                <div class="modal-footer border-top-0">
                  <button id="modal-cancel-btn" type="button" class="btn btn-secondary rounded-pill shadow-sm bg-secondary text-light" data-bs-dismiss="modal">cancel</button>
                  <form class="d-inline" action="/frames/<%= frames[i]._id%>?_method=DELETE" method="POST">
                    <button id="modal-delete-btn" class="btn rounded-pill shadow-sm border-secondary">confirm delete</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
          
        </div>
      </div>
    </div> 
<% } %>
</div>

<div class="d-grid gap-2 col-2 mx-auto mb-5 mt-5">
    <a class="btn rounded-pill text-dark border-secondary fw-semibold" href="/frames/scan" role="button">start scanning</a>
</div>

<script src="/scripts/validateForms.js"></script>
