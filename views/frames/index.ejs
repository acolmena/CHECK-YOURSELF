<%- layout('layouts/boilerplate') %>
<h1 class="text-center mb-3">Create Frames</h1>
<div class="row">
  <div class="col-8 offset-2">
    <%- include('../partials/howToUseAdd') %>
  </div>

<div>
    <!-- <a class="btn btn-info mb-3" href="/frames/new">Add A New Frame</a> -->
    <!-- <button class="btn btn-info mb-3" id="nextFrameBtn" onclick="makeNewAccordionWForm()">Add Next Frame</button> -->
    <%- include('../partials/frameForm') %>
</div>
<div class="row">
  <% for (let i = count - 1; i > -1; i--) { %>
    <div class="col-sm-3 mb-4 mb-sm-0">
      <div class="card mb-4 rounded-4 shadow-sm rounded" id="card<%= frames[i]._id%>" style="background-color: <%= frames[i].color%>;">
        <!-- <img src="..." class="card-img-top" alt="..."> -->
        <div class="card-body">
          <h3 class="card-title"><%= frames[i].title %> frame</h3>
          <!-- <p class="card-text" style="font-weight: 500;  margin-bottom: 10px; margin-top: 20px;">Description </p> -->
          <h6  class="card-subtitle mb-2 text-body-secondary"><%= frames[i].description %></h6>
          <!-- </br>
          <center>
            <hr style="width: 90%;">
          </center>
          </br>
          <p style="font-weight: 500; margin-bottom: 0px; margin-top: 10px;">Words</p> -->
        </div>
        <ul class="list-group list-group-flush">
          <% for (let word of frames[i].words) { %>
            <li class="list-group-item"><%= word %></li>
          <% } %>
        </ul>
        <div class="card-body">
          <a class="card-link btn rounded-pill border shadow-sm" href="/frames/<%= frames[i]._id %>/edit/#cardToEdit" style="background-color: rgba(239, 239, 239, 0.722);">Edit</a>
          <!-- Button trigger modal -->
          <button type="button" class="btn btn-danger rounded-pill border border-danger shadow-sm" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
            Delete
          </button>

          <!-- Modal -->
          <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h1 class="modal-title fs-5" id="staticBackdropLabel">Delete Frame</h1>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <strong style="font-weight: 500;">Are you sure you want to delete this frame?</strong> 
                  <br></br>
                  This would also delete the <strong style="font-weight: 500;">description</strong> and <strong style="font-weight: 500;">all words</strong> associated with it.
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary rounded-pill shadow-sm" data-bs-dismiss="modal">Cancel</button>
                  <form class="d-inline" action="/frames/<%= frames[i]._id%>?_method=DELETE" method="POST">
                    <button class="btn btn-danger rounded-pill border border-danger shadow-sm">Confirm Delete</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
          
        </div>
      </div>
    </div> 
<% } %>
</div>

<div class="d-grid gap-2 col-2 mx-auto mb-5">
    <a class="btn bg-info-subtle rounded-pill border shadow-sm mt-5" href="/frames/scan" role="button">Start Scanning</a>
</div>
<script src="/scripts/validateForms.js"></script>
