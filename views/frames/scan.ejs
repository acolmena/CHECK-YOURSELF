<%- layout('layouts/boilerplate') %>
<div class="row"> 
    <div class="mb-5">
        <%- include('../partials/howToUseScanBtn') %>
    </div>
    <div class="mb-5 btn-group col-5 offset-7 " id="exportBtns">
        <div class="dropdown me-2 ">
            <button class="btn dropdown-toggle rounded-5 shadow-sm" type="button" data-bs-toggle="dropdown" aria-expanded="false" style="background-color: #fcff9e;">
                <strong style="font-weight: 500;">Export Items Analyzed</strong> 
            </button>
            <ul class="dropdown-menu bg-warning-subtle rounded-4 shadow-lg">
                <li>
                    <a href="" class="dropdown-item" id="exportTxtContentLink" title="export file with titl and content of text(s) analyzed">Export Text Content</a>
                </li>
                <li>
                    <a href="" class="dropdown-item" id="exportFramesLink" title="export your frames so you can reuse them in the future">Export Frames</a>
                </li>
                <li>
                <a class="dropdown-item" href="" id="exportBothContentLink">Export Both</a>
                </li>
            </ul>
        </div>
        <div class="dropdown me-2">
            <button class="btn dropdown-toggle rounded-5 shadow-sm" type="button" data-bs-toggle="dropdown" aria-expanded="false" style="background-color: #fcff9e;">
                <strong style="font-weight: 500;">Export Analysis Results</strong>
            </button>
            <ul class="dropdown-menu bg-warning-subtle rounded-4 shadow-lg">
                <li>
                <a href="" class="dropdown-item" id="exportOverallResultsLink" title="export the results of your scans">Export Overall Results</a>
                </li>
                <li>
                <a href="" class="dropdown-item" id="exportArticleResultsLink" title="export the results of your scans">Export Results Per Article</a>
                </li>
                <li>
                <a class="dropdown-item" href="">Export Both</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="col-8 offset-2">
        <div class="accordion" id="accordion" style=" display: none; margin-bottom: 50px;">  </div>
            <div id="results0" style="display: none;">
                <p id="outputText0" class="rounded-text-box" style="background-color: #F4F5F5;
                    border-radius: 20px; width: 50%;
                    min-width: 400px;
                    float: left;
                    height: auto;
                    padding: 3%;
                    border-radius: 10px;
                    margin-left: 5%;
                    background-color: #F4F5F5;
                    margin-bottom: 200px;">Â 
                </p>
                
                <div id="chartPar0" style="width: 650px; margin-bottom: 50px">
                    <canvas id="myChart0" aria-label="pie chart for scan" role="pie chart">
                        <p>Pie chart breaking down instances of frames found</p>
                    </canvas> 
                    
                </div>
            </div>
      
        <div class="d-grid gap-2 col-3 mx-auto" id="newScanBtnDiv">
            <button id="newScanBtn" class="btn btn-primary" style="display: none; margin-bottom: 40px; background-color: rgb(255, 169, 199); border-radius: 30px; border-color: rgb(255, 28, 142);">Scan Again</button>
        </div>
        <div class="card card-body mb-3 rounded-4 shadow-sm" style="background-color: #fdff94; padding: 3% 3% 0% 3%;">
            <form class="mb-3" id="inputForm">
                <div class="mb-3">
                    <label class="form-label" for="inputTitle" style="font-weight: 600">Title</label>
                    <input class="form-control shadow-sm border border-0" id="inputTitle" type="text" spellcheck="true" placeholder="Enter title here!" name="inputTitle" style="background-color: #fefff4;">
                </div>
                <div >
                    <label class="form-label" for="inputText" style="font-weight: 600">Text</label>
                    <textarea class="form-control shadow-sm border border-0" id="inputText" spellcheck="true" style="height: 350px;background-color: #fefff4;" placeholder="Enter your text here!" name="inputText"></textarea>  <!-- background-color: #fee6fc; -->
                </div>
                <p>&nbsp;</p>
                <!-- <p><input id="scanArticle" class="btn btn-success btn-large mx-auto" type="button" value="Scan Article" /></p> -->
                <div class="d-grid gap-2 col-3 mx-auto">
                    <button class="btn btn-success rounded-5 shadow" type="button" id="scanArticleBtn" style="background-color: rgb(159, 223, 246); border-radius: 30px; color: rgb(30, 30, 30); border-color: rgb(121, 156, 205);"><strong style="font-weight: 500;">Scan Text</strong></button>  
                  </div>
                <br />
            </form>
        </div>
        
        
        <!-- <div id="frameMessage"   style="display: none; 
                                        color: black;
                                        position: sticky;
                                        width: 30%;
                                        float: right;
                                        margin-top: -950px;
                                        padding: 1%;
                                        right:5%;
                                        border-radius: 10px;
                                        top: 0px;"> -->
            <% for (let frame of frames) {%>
                <aside id="<%= frame._id %>"  style="display: none; 
                    color: black;
                    position: sticky;
                    width: 30%;
                    float: right;
                    margin-top: -950px;
                    padding: 1%;
                    right:5%;
                    border-radius: 10px;
                    top: 0px;"><strong><%= frame.title %></strong> </br>  <%= frame.description %></aside>
            <% } %>
        <!-- </div> -->
     

        <p>&nbsp;</p>
    </div>
</div>
<script>
    const frames = <%- JSON.stringify(frames) %>
</script>
<script src="/scripts/scan.js"></script>
<script src="/scripts/export.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>



